<div class="container mt-4">
  <!-- ===================== SECCIÓN LÍMITE ===================== -->
  <h3 class="mb-3">Gestión de Límites</h3>

  <form [formGroup]="parametriaLimiteFormGroup" (ngSubmit)="onSaveButtonClickedLimite()" class="row g-3">

    <div class="col-md-4">
      <label for="limite" class="form-label">Límite</label>
      <input
        type="number"
        id="limite"
        class="form-control"
        formControlName="limite"
        placeholder="Ingrese límite" />
    </div>

    <div class="col-md-4">
      <label for="fecPeriodoLimite" class="form-label">Periodo</label>
      <input
        type="date"
        id="fecPeriodoLimite"
        class="form-control"
        formControlName="fec_periodo" />
    </div>

    <div class="col-md-2 d-flex align-items-center">
      <div class="form-check mt-4">
        <input
          type="checkbox"
          id="estadoLimite"
          class="form-check-input"
          formControlName="estado" />
        <label class="form-check-label" for="estadoLimite">Activo</label>
      </div>
    </div>

    <div class="col-md-2 d-flex align-items-center">
      <button
        type="submit"
        class="btn btn-primary mt-4"
        [disabled]="!getSaveButtonEnabledLimite() || isFormLoading">
        {{ parametriaLimiteFormGroup.value.idLimite && parametriaLimiteFormGroup.value.idLimite !== -1 ? 'Actualizar' : 'Crear' }}
      </button>
    </div>
  </form>

  <hr />

  <h5 class="mt-3">Listado de Límites</h5>
  <table class="table table-striped table-hover mt-2">
    <thead>
      <tr>
        <th>ID</th>
        <th>Límite</th>
        <th>Periodo</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of tableDataLimite">
        <td>{{ row.idLimite }}</td>
        <td>{{ row.limite }}</td>
        <td>{{ row.fec_periodo | date }}</td>
        <td>
          <span class="badge" [ngClass]="row.estado == 1 ? 'bg-success' : 'bg-danger'">
            {{ row.estado == 1 ? 'Activo' : 'Inactivo' }}
          </span>
        </td>
        <td>
          <button class="btn btn-sm btn-warning me-2" (click)="parametriaLimiteFormGroup.patchValue(row)">
            Editar
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteRowParametriaLimite(row.idLimite)">
            Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- ===================== SECCIÓN PATRIMONIO ===================== -->
  <h3 class="mt-5 mb-3">Gestión de Patrimonio</h3>

  <form [formGroup]="parametriaPatrimonioFormGroup" (ngSubmit)="onSaveButtonClickedPatrimonio()" class="row g-3">

    <div class="col-md-4">
      <label for="patrimonio" class="form-label">Patrimonio</label>
      <input
        type="number"
        id="patrimonio"
        class="form-control"
        formControlName="patrimonio"
        placeholder="Ingrese patrimonio" />
    </div>

    <div class="col-md-4">
      <label for="fecPeriodoPatrimonio" class="form-label">Periodo</label>
      <input
        type="date"
        id="fecPeriodoPatrimonio"
        class="form-control"
        formControlName="fec_periodo" />
    </div>

    <div class="col-md-2 d-flex align-items-center">
      <div class="form-check mt-4">
        <input
          type="checkbox"
          id="estadoPatrimonio"
          class="form-check-input"
          formControlName="estado" />
        <label class="form-check-label" for="estadoPatrimonio">Activo</label>
      </div>
    </div>

    <div class="col-md-2 d-flex align-items-center">
      <button
        type="submit"
        class="btn btn-primary mt-4"
        [disabled]="!getSaveButtonEnabledPatrimonio() || isFormLoading">
        {{ parametriaPatrimonioFormGroup.value.idPatrimonio && parametriaPatrimonioFormGroup.value.idPatrimonio !== -1 ? 'Actualizar' : 'Crear' }}
      </button>
    </div>
  </form>

  <hr />

  <h5 class="mt-3">Listado de Patrimonio</h5>
  <table class="table table-striped table-hover mt-2">
    <thead>
      <tr>
        <th>ID</th>
        <th>Patrimonio</th>
        <th>Periodo</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of tableDataPatrimonio">
        <td>{{ row.idPatrimonio }}</td>
        <td>{{ row.patrimonio }}</td>
        <td>{{ row.fec_periodo | date }}</td>
        <td>
          <span class="badge" [ngClass]="row.estado == 1 ? 'bg-success' : 'bg-danger'">
            {{ row.estado == 1 ? 'Activo' : 'Inactivo' }}
          </span>
        </td>
        <td>
          <button class="btn btn-sm btn-warning me-2" (click)="parametriaPatrimonioFormGroup.patchValue(row)">
            Editar
          </button>
          <button class="btn btn-sm btn-danger" (click)="deleteRowParametriaPatrimonio(row.idPatrimonio)">
            Eliminar
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
